import{A as e,_ as t,a,p as s,b as i,r as l,c as r,o,d as n,e as c,t as h,w as d,v as u,T as p,F as m,f,g as v,h as w,i as y,j as g,k as b,l as R}from"./vendor.278d1516.js";e.init({appId:"KevHy7qQ0PeY5LE99d5sRelK-MdYXbMMI",appKey:"LzabiOqIPn3hDLdwkYDjQ9s5",serverURL:"https://kevhy7qq.api.lncldglobal.com"});var V=async()=>{const t=new e.Query("TopList");return(await t.find()).map((e=>({id:e.id,playerName:e.attributes.playerName,record:e.attributes.record,isShuffle:e.attributes.isShuffle,createDate:e.attributes.createDate})))},T=async t=>{const a=new(e.Object.extend("TopList"));for(let e in t)a.set(e.toString(),t[e]);try{return{code:200,id:(await a.save()).id}}catch(s){return{code:500,err:s}}};const L={name:"App",data:()=>({inputVal:"",isShuffle:!1,curr:"",index:"",isLast:"",alpha:"",timer:"",showTime:0,startTime:"",records:[],rotate:!1,date:"",newRecVisible:!1,topRecVisible:!1,showShuffle:!1,newRecForm:{newPlayerName:""},topRec:[],formLoading:!0,submitLoading:!1}),created(){this.getDate(),this.alpha=this.createAlpha(this.isShuffle),this.initAlpha()},mounted(){this.$refs.refInput.onpaste=function(){return!1}},computed:{upperCaseCurr(){return this.curr.toUpperCase()},showTopRec(){const e=this.topRec.filter((e=>e.isShuffle)),t=this.topRec.filter((e=>!e.isShuffle));return this.showShuffle?e:t}},watch:{inputVal(e,t){if(this.inputVal){const a=/^[A-Za-z]+$/.test(e);this.inputVal=a?e:t}},isShuffle(e){this.handleReset()},newRecVisible(e){setTimeout((()=>{this.$refs.refInput.blur()}),1)}},methods:{initTimer(){this.timer=setInterval((()=>{this.showTime=(.001*(Date.now()-this.startTime)).toFixed(3)}),1)},handleKeyup(e){if(/^[A-Za-z]+$/.test(e.key.toLowerCase()))if(e.key.toLowerCase()===this.curr){const e=Date.now();0===this.index&&(this.startTime=e,this.initTimer()),this.records.push({display:this.curr.toUpperCase(),currTime:((e-this.startTime)/1e3).toFixed(3)}),this.isLast?(this.curr="完成",clearInterval(this.timer),this.showTime=this.records.slice(-1)[0].currTime,this.newRecVisible=!0):this.initAlpha()}else e.preventDefault();else e.preventDefault()},handleReset(){this.inputVal="",this.alpha=null,this.alpha=this.createAlpha(this.isShuffle),this.initAlpha(),this.startTime="",this.records=[],clearInterval(this.timer),this.showTime=0},initAlpha(){const{val:e,index:t,isLast:a}=this.alpha();this.curr=e,this.index=t,this.isLast=a},createAlpha(e){let a=0,s=["a","b","c","d"];return s=e?t.shuffle(s):s,()=>{const e=s[a],t=a>=s.length-1;return{val:e,index:a++,isLast:t}}},handleRotate:t.throttle((function(){this.rotate=!0,setTimeout((()=>{this.rotate=!1}),1e3)}),1e3),getDate(){this.$moment.locale("zh-cn"),this.date=this.$moment().format("yyyy年M月d日 h:mm:ss"),setInterval((()=>{this.date=this.$moment().format("yyyy年M月d日 h:mm:ss")}),500)},submitRec(e){this.submitLoading=!0,this.$refs[e].validate((async e=>{if(!e)return!1;{const e={playerName:this.newRecForm.newPlayerName,record:parseFloat(this.showTime),isShuffle:this.isShuffle,createDate:Date.now()},t=await T(e);this.submitLoading=!1,200===t.code?(this.newRecVisible=!1,console.log(t.id),a.success({message:"提交成功!",type:"success",duration:1e3})):(console.log(t.err),a.error("提交失败!"))}}))},async handleTopBtn(){this.topRecVisible=!0,this.topRec=await V(),this.formLoading=!1,this.showShuffle=this.isShuffle},formatRecord:e=>e.record+"s",formatcreateDate(e){return this.$moment(e.createDate).format("YY.MM.DD")}}},S=w("data-v-5a53f604");s("data-v-5a53f604");const x={class:"container"},D={class:"top"},k=c("h1",{class:"title vivify shake"},"Type Game",-1),C=c("h2",{class:"subtitle"},"输入字母，看看你的速度有多快 :)",-1),I=c("div",{class:"github"},[c("a",{href:"http://zoutianwei.github.io"},[c("img",{src:"/alpha-game/assets/github.307f2da5.png",alt:"github"})])],-1),A={class:"status"},F={class:"game"},$={class:"mode"},_=y("排行榜 🏆"),N=y(" 时间: "),U={class:""},P=y("s "),K={key:0,class:"result"},M=c("p",null,"成绩 🏁",-1),z=y(),q={class:"bottom"},Y={class:"dialog-new"},j={class:"wrap"},O={style:{"margin-bottom":"10px"}},Q={style:{}},B={class:"dialog-footer"},Z=y("取 消"),E=y("确 定"),G={class:"dialog-top"},H={style:{"text-align":"right"}};i();const X=S(((e,t,a,s,i,w)=>{const y=l("el-switch"),g=l("el-button"),b=l("el-input"),R=l("el-form-item"),V=l("el-form"),T=l("el-dialog"),L=l("el-table-column"),X=l("el-table"),J=r("loading");return o(),n(m,null,[c("div",x,[c("div",D,[k,C,I,c("div",A,[c("p",{class:["msg",{"vivify spin duration-1000":"完成"===w.upperCaseCurr}]},h(w.upperCaseCurr),3)]),c("div",F,[d(c("input",{type:"text",class:"game-input","onUpdate:modelValue":t[1]||(t[1]=e=>i.inputVal=e),placeholder:"在这里输入",onKeydown:t[2]||(t[2]=(...e)=>w.handleKeyup&&w.handleKeyup(...e)),ref:"refInput",autocomplete:"off",autocapitalize:"off",spellcheck:"false"},null,544),[[u,i.inputVal]]),c("div",{class:["game-reset",{"vivify spin duration-1000":i.rotate}],onClick:t[3]||(t[3]=e=>{w.handleReset(),w.handleRotate()})}," Reset ",2)]),c("div",$,[c(y,{modelValue:i.isShuffle,"onUpdate:modelValue":t[4]||(t[4]=e=>i.isShuffle=e),"active-color":"#2ec4b6","inactive-color":"#e71d46","active-text":"随机","inactive-text":"顺序"},null,8,["modelValue"])]),c(g,{type:"warning",onClick:w.handleTopBtn},{default:S((()=>[_])),_:1},8,["onClick"]),c("div",{class:["timer",{"shake-little shake-constant":i.records.length}]},[N,c("span",U,h(i.showTime?i.showTime:"0.000"),1),P],2),c(p,{"enter-active-class":"vivify driveInTop duration-500","leave-active-class":"vivify driveOutTop duration-500"},{default:S((()=>[i.records.length?(o(),n("div",K,[M,c("ul",null,[(o(!0),n(m,null,f(i.records,((e,t)=>(o(),n("li",{key:`records-${t}`},[c("span",null,h(e.display)+": ",1),z,c("span",null,h(e.currTime)+"s",1)])))),128))])])):v("",!0)])),_:1})]),c("div",q,[c("p",null,h(i.date),1)])]),c("div",Y,[c(T,{title:"记录一下",modelValue:i.newRecVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>i.newRecVisible=e),width:"80%",center:""},{footer:S((()=>[c("span",B,[c(g,{onClick:t[6]||(t[6]=e=>i.newRecVisible=!1)},{default:S((()=>[Z])),_:1}),c(g,{type:"primary",onClick:t[7]||(t[7]=e=>w.submitRec("newRecForm")),loading:i.submitLoading},{default:S((()=>[E])),_:1},8,["loading"])])])),default:S((()=>[c("div",j,[c("div",O,h(i.isShuffle?"随机":"顺序")+"模式 ",1),c("div",Q,"本次成绩: "+h(i.showTime)+"s",1),c(V,{model:i.newRecForm,ref:"newRecForm"},{default:S((()=>[c(R,{prop:"newPlayerName",rules:[{required:!0,message:"名字不能为空"},{max:5,message:"名字不能超过5个字符"}]},{default:S((()=>[c(b,{modelValue:i.newRecForm.newPlayerName,"onUpdate:modelValue":t[5]||(t[5]=e=>i.newRecForm.newPlayerName=e),placeholder:"请输入你的名字"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"])]),c("div",G,[c(T,{title:"排行榜",modelValue:i.topRecVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>i.topRecVisible=e),width:"90%","max-width":"100px",center:"","lock-scroll":"",onClose:t[11]||(t[11]=e=>i.formLoading=!1)},{default:S((()=>[c("div",H,[c(y,{modelValue:i.showShuffle,"onUpdate:modelValue":t[9]||(t[9]=e=>i.showShuffle=e),"active-color":"#2ec4b6","inactive-color":"#e71d46","active-text":"随机","inactive-text":"顺序"},null,8,["modelValue"])]),d(c(X,{data:w.showTopRec,"default-sort":{prop:"record"},height:"50vh"},{default:S((()=>[c(L,{type:"index",label:"排名"}),c(L,{property:"playerName",label:"玩家名称"}),c(L,{property:"record",label:"成绩",formatter:w.formatRecord},null,8,["formatter"]),c(L,{property:"createDate",label:"记录日期",formatter:w.formatcreateDate},null,8,["formatter"])])),_:1},8,["data"]),[[J,i.formLoading]])])),_:1},8,["modelValue"])])],64)}));L.render=X,L.__scopeId="data-v-5a53f604";const J=g(L);J.config.globalProperties.$moment=b,J.use(R),J.mount("#app");
