import{A as e,_ as t,a,p as s,b as i,r as l,c as r,o,d as n,e as c,t as h,w as d,v as u,T as p,F as m,f,g as v,h as w,i as y,j as g,k as b,l as R}from"./vendor.278d1516.js";e.init({appId:"KevHy7qQ0PeY5LE99d5sRelK-MdYXbMMI",appKey:"LzabiOqIPn3hDLdwkYDjQ9s5",serverURL:"https://kevhy7qq.api.lncldglobal.com"});var V=async()=>{const t=new e.Query("TopList");return(await t.find()).map((e=>({id:e.id,playerName:e.attributes.playerName,record:e.attributes.record,isShuffle:e.attributes.isShuffle,createDate:e.attributes.createDate})))},T=async t=>{const a=new(e.Object.extend("TopList"));for(let e in t)a.set(e.toString(),t[e]);try{return{code:200,id:(await a.save()).id}}catch(s){return{code:500,err:s}}};const L={name:"App",data:()=>({inputVal:"",isShuffle:!1,curr:"",index:"",isLast:"",alpha:"",timer:"",showTime:0,startTime:"",records:[],rotate:!1,date:"",newRecVisible:!1,topRecVisible:!1,showShuffle:!1,newRecForm:{newPlayerName:""},topRec:[],formLoading:!0,submitLoading:!1}),created(){this.getDate(),this.alpha=this.createAlpha(this.isShuffle),this.initAlpha()},mounted(){this.$refs.refInput.onpaste=function(){return!1}},computed:{upperCaseCurr(){return this.curr.toUpperCase()},showTopRec(){const e=this.topRec.filter((e=>e.isShuffle)),t=this.topRec.filter((e=>!e.isShuffle));return this.showShuffle?e:t}},watch:{inputVal(e,t){if(this.inputVal){const a=/^[A-Za-z]+$/.test(e);this.inputVal=a?e:t}},isShuffle(e){this.handleReset()},newRecVisible(e){setTimeout((()=>{this.$refs.refInput.blur()}),1)}},methods:{initTimer(){this.timer=setInterval((()=>{this.showTime=(.001*(Date.now()-this.startTime)).toFixed(3)}),1)},handleKeyup(e){if(/^[A-Za-z]+$/.test(e.key.toLowerCase()))if(e.key.toLowerCase()===this.curr){const e=Date.now();0===this.index&&(this.startTime=e,this.initTimer()),this.records.push({display:this.curr.toUpperCase(),currTime:((e-this.startTime)/1e3).toFixed(3)}),this.isLast?(this.curr="å®Œæˆ",clearInterval(this.timer),this.showTime=this.records.slice(-1)[0].currTime,this.newRecVisible=!0):this.initAlpha()}else e.preventDefault();else e.preventDefault()},handleReset(){this.inputVal="",this.alpha=null,this.alpha=this.createAlpha(this.isShuffle),this.initAlpha(),this.startTime="",this.records=[],clearInterval(this.timer),this.showTime=0},initAlpha(){const{val:e,index:t,isLast:a}=this.alpha();this.curr=e,this.index=t,this.isLast=a},createAlpha(e){let a=0,s=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return s=e?t.shuffle(s):s,()=>{const e=s[a],t=a>=s.length-1;return{val:e,index:a++,isLast:t}}},handleRotate:t.throttle((function(){this.rotate=!0,setTimeout((()=>{this.rotate=!1}),1e3)}),1e3),getDate(){this.$moment.locale("zh-cn"),this.date=this.$moment().format("yyyyå¹´Mæœˆdæ—¥ h:mm:ss"),setInterval((()=>{this.date=this.$moment().format("yyyyå¹´Mæœˆdæ—¥ h:mm:ss")}),500)},submitRec(e){this.submitLoading=!0,this.$refs[e].validate((async e=>{if(!e)return!1;{const e={playerName:this.newRecForm.newPlayerName,record:parseFloat(this.showTime),isShuffle:this.isShuffle,createDate:Date.now()},t=await T(e);this.submitLoading=!1,200===t.code?(this.newRecVisible=!1,console.log(t.id),a.success({message:"æäº¤æˆåŠŸ!",type:"success",duration:1e3})):(console.log(t.err),a.error("æäº¤å¤±è´¥!"))}}))},async handleTopBtn(){this.topRecVisible=!0,this.topRec=await V(),this.formLoading=!1,this.showShuffle=this.isShuffle},formatRecord:e=>e.record+"s",formatcreateDate(e){return this.$moment(e.createDate).format("YY.MM.DD")}}},x=w("data-v-22c950c6");s("data-v-22c950c6");const S={class:"container"},k={class:"top"},D=c("h1",{class:"title vivify shake"},"Type Game",-1),C=c("h2",{class:"subtitle"},"è¾“å…¥å­—æ¯ï¼Œçœ‹çœ‹ä½ çš„é€Ÿåº¦æœ‰å¤šå¿« :)",-1),I=c("div",{class:"github"},[c("a",{href:"http://zoutianwei.github.io"},[c("img",{src:"/alpha-game/assets/github.307f2da5.png",alt:"github"})])],-1),A={class:"status"},F={class:"game"},$={class:"mode"},_=y("æ’è¡Œæ¦œ ğŸ†"),N=y(" æ—¶é—´: "),U={class:""},P=y("s "),z={key:0,class:"result"},K=c("p",null,"æˆç»© ğŸ",-1),M=y(),q={class:"bottom"},j={class:"dialog-new"},Y={class:"wrap"},O={style:{"margin-bottom":"10px"}},Q={style:{}},B={class:"dialog-footer"},Z=y("å– æ¶ˆ"),E=y("ç¡® å®š"),G={class:"dialog-top"},H={style:{"text-align":"right"}};i();const X=x(((e,t,a,s,i,w)=>{const y=l("el-switch"),g=l("el-button"),b=l("el-input"),R=l("el-form-item"),V=l("el-form"),T=l("el-dialog"),L=l("el-table-column"),X=l("el-table"),J=r("loading");return o(),n(m,null,[c("div",S,[c("div",k,[D,C,I,c("div",A,[c("p",{class:["msg",{"vivify spin duration-1000":"å®Œæˆ"===w.upperCaseCurr}]},h(w.upperCaseCurr),3)]),c("div",F,[d(c("input",{type:"text",class:"game-input","onUpdate:modelValue":t[1]||(t[1]=e=>i.inputVal=e),placeholder:"åœ¨è¿™é‡Œè¾“å…¥",onKeydown:t[2]||(t[2]=(...e)=>w.handleKeyup&&w.handleKeyup(...e)),ref:"refInput",autocomplete:"off",autocapitalize:"off",spellcheck:"false"},null,544),[[u,i.inputVal]]),c("div",{class:["game-reset",{"vivify spin duration-1000":i.rotate}],onClick:t[3]||(t[3]=e=>{w.handleReset(),w.handleRotate()})}," Reset ",2)]),c("div",$,[c(y,{modelValue:i.isShuffle,"onUpdate:modelValue":t[4]||(t[4]=e=>i.isShuffle=e),"active-color":"#2ec4b6","inactive-color":"#e71d46","active-text":"éšæœº","inactive-text":"é¡ºåº"},null,8,["modelValue"])]),c(g,{type:"warning",onClick:w.handleTopBtn},{default:x((()=>[_])),_:1},8,["onClick"]),c("div",{class:["timer",{"shake-little shake-constant":i.records.length}]},[N,c("span",U,h(i.showTime?i.showTime:"0.000"),1),P],2),c(p,{"enter-active-class":"vivify driveInTop duration-500","leave-active-class":"vivify driveOutTop duration-500"},{default:x((()=>[i.records.length?(o(),n("div",z,[K,c("ul",null,[(o(!0),n(m,null,f(i.records,((e,t)=>(o(),n("li",{key:`records-${t}`},[c("span",null,h(e.display)+": ",1),M,c("span",null,h(e.currTime)+"s",1)])))),128))])])):v("",!0)])),_:1})]),c("div",q,[c("p",null,h(i.date),1)])]),c("div",j,[c(T,{title:"è®°å½•ä¸€ä¸‹",modelValue:i.newRecVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>i.newRecVisible=e),width:"80%",center:""},{footer:x((()=>[c("span",B,[c(g,{onClick:t[6]||(t[6]=e=>i.newRecVisible=!1)},{default:x((()=>[Z])),_:1}),c(g,{type:"primary",onClick:t[7]||(t[7]=e=>w.submitRec("newRecForm")),loading:i.submitLoading},{default:x((()=>[E])),_:1},8,["loading"])])])),default:x((()=>[c("div",Y,[c("div",O,h(i.isShuffle?"éšæœº":"é¡ºåº")+"æ¨¡å¼ ",1),c("div",Q,"æœ¬æ¬¡æˆç»©: "+h(i.showTime)+"s",1),c(V,{model:i.newRecForm,ref:"newRecForm"},{default:x((()=>[c(R,{prop:"newPlayerName",rules:[{required:!0,message:"åå­—ä¸èƒ½ä¸ºç©º"},{max:5,message:"åå­—ä¸èƒ½è¶…è¿‡5ä¸ªå­—ç¬¦"}]},{default:x((()=>[c(b,{modelValue:i.newRecForm.newPlayerName,"onUpdate:modelValue":t[5]||(t[5]=e=>i.newRecForm.newPlayerName=e),placeholder:"è¯·è¾“å…¥ä½ çš„åå­—"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"])]),c("div",G,[c(T,{title:"æ’è¡Œæ¦œ",modelValue:i.topRecVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>i.topRecVisible=e),width:"90%","max-width":"100px",center:"","lock-scroll":"",onClose:t[11]||(t[11]=e=>i.formLoading=!1)},{default:x((()=>[c("div",H,[c(y,{modelValue:i.showShuffle,"onUpdate:modelValue":t[9]||(t[9]=e=>i.showShuffle=e),"active-color":"#2ec4b6","inactive-color":"#e71d46","active-text":"éšæœº","inactive-text":"é¡ºåº"},null,8,["modelValue"])]),d(c(X,{data:w.showTopRec,"default-sort":{prop:"record"},height:"50vh"},{default:x((()=>[c(L,{type:"index",label:"æ’å"}),c(L,{property:"playerName",label:"ç©å®¶åç§°"}),c(L,{property:"record",label:"æˆç»©",formatter:w.formatRecord},null,8,["formatter"]),c(L,{property:"createDate",label:"è®°å½•æ—¥æœŸ",formatter:w.formatcreateDate},null,8,["formatter"])])),_:1},8,["data"]),[[J,i.formLoading]])])),_:1},8,["modelValue"])])],64)}));L.render=X,L.__scopeId="data-v-22c950c6";const J=g(L);J.config.globalProperties.$moment=b,J.use(R),J.mount("#app");
